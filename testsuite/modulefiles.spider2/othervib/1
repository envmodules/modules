#%Module
if {[info exists env(TESTSUITE_REQUIRE_VIA)]} {
    switch -- $env(TESTSUITE_REQUIRE_VIA) {
        multi_mod_in_path_with_req1 - multi_mod_in_path_with_req_some_hidden1 -\
        req_not_anymore_does_not_exist - req_not_anymore_still_exists -\
        req_another_not_loaded {
            prereq modb/1
        }
        multi_mod_in_path_with_req_unk_variant_name {
            if {![is-used $env(TESTSUITEDIR)/modulefiles.other2]} {
                variant foo val1 val2 val3
            }
        }
        multi_mod_in_path_with_req_unk_variant_val {
            if {![is-used $env(TESTSUITEDIR)/modulefiles.other2]} {
                variant foo val1 val2 val3
            } else {
                variant foo val2 val3
            }
        }
        conflict_in_new1 {
            if {[is-used $env(TESTSUITEDIR)/modulefiles.other2]} {
                conflict othervic
            }
        }
        conflict_not_anymore1 {
            if {![is-used $env(TESTSUITEDIR)/modulefiles.other2]} {
                conflict othervic
            }
        }
    }
}
